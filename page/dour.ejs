<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ†‚é¬±é‡è¡¨</title>
    <link rel="stylesheet" 
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        /* èƒŒæ™¯è¨­ç½® */
        body {
            background: linear-gradient(to right, rgba(0, 123, 255, 0.1), rgba(0, 123, 255, 0.2)), 
                        url('https://via.placeholder.com/1500x1000/87CEFA/ffffff?text=Background+Image') no-repeat center center fixed;
            background-size: cover;
            font-family: 'DFKai-SB', 'æ¨™æ¥·é«”', DFKai-SB, serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        /* å®¹å™¨æ¨£å¼è¨­ç½® */
        .container {
            margin-top: 50px;
            background-color: #ffffff;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            z-index: 1;
            width: 100%;
            max-width: 950px;
            margin-left: auto;
            margin-right: auto;
        }

        /* æ¨™é¡Œæ¨£å¼ */
        h2 {
            text-align: center;
            color: #007bff;
        }

        /* é«˜åˆ†æ•¸å¼·èª¿ */
        .highlight {
            font-weight: bold;
            color: #d9534f;
        }

        /* è¡¨æ ¼å¤–å±¤æ»¾å‹•å®¹å™¨ */
        .table-responsive-wrapper {
            overflow-x: auto;
        }

        /* è¡¨æ ¼æ¨£å¼ */
        .table {
            background-color: #ffffff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            min-width: 1000px; /* å¼·åˆ¶è¡¨æ ¼å…·æœ‰ä¸€å®šå¯¬åº¦ä¾›æ°´å¹³æ»¾å‹• */
        }

        /* éŸ¿æ‡‰å¼è¨­ç½® */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            h2 {
                font-size: 22px;
            }

            .table th, .table td {
                font-size: 14px;
                padding: 8px;
            }

            .btn {
                font-size: 14px;
                padding: 8px 15px;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h2 class="text-center mb-4">æ†‚é¬±é‡è¡¨ç´€éŒ„</h2>

    <% let queryStringParam = table === "users" ? "user_id" : "man_user_id"; %>
    <% let recordId = userId || manUserId; %>
 

        <!-- é¡¯ç¤ºä½¿ç”¨è€…è³‡è¨Š -->
        <p><strong>IDï¼š</strong> <%= recordId || 'æœªæä¾›' %></p>
        <p><strong>åå­—ï¼š</strong> <%= user_name || 'æœªæä¾›' %></p>


    <script>
        console.log("ğŸ” EJS å‰ç«¯æ”¶åˆ°çš„ recordId:", "<%= recordId %>");
    </script>

    <div class="table-responsive-wrapper">
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>æ¬„ä½åç¨±</th>
                    <% assessmentsData.forEach((_, index) => { %>
                        <th>ç´€éŒ„ <%= index + 1 %></th>
                    <% }); %>
                </tr>
            </thead>
<tbody>
    <tr>
        <td>ID</td>
        <% assessmentsData.forEach(item => { %>
            <td><%= item.dour_id %></td>
        <% }); %>
    </tr>
    <tr>
        <td>æ¸¬é©—é‡è¡¨</td>
        <% assessmentsData.forEach(item => { %>
            <td><%= item.dour_question_content %></td>
        <% }); %>
    </tr>
    <tr>
        <td>æ¸¬é©—æ—¥æœŸ</td>
        <% assessmentsData.forEach(item => { %>
            <td>
                <%= new Date(item.dour_test_date).toLocaleDateString('zh-TW', {
                    year: 'numeric', month: 'long', day: 'numeric'
                }) %>
            </td>
        <% }); %>
    </tr>

    <% const dourQuestions = [
        "æˆ‘èƒ½é–‹æ‡·çš„ç¬‘ä¸¦çœ‹åˆ°äº‹ç‰©æœ‰è¶£çš„ä¸€é¢",
        "æˆ‘èƒ½å¤ ä»¥å¿«æ¨‚çš„å¿ƒæƒ…ä¾†æœŸå¾…äº‹æƒ…",
        "ç•¶äº‹æƒ…ä¸é †åˆ©æ™‚,æˆ‘æœƒä¸å¿…è¦åœ°è²¬å‚™è‡ªå·±",
        "æˆ‘æœƒç„¡ç·£ç„¡æ•…æ„Ÿåˆ°ç„¦æ…®å’Œæ“”å¿ƒ",
        "æˆ‘æœƒç„¡ç·£ç„¡æ•…æ„Ÿåˆ°å®³æ€•å’Œé©šæ…Œ",
        "äº‹æƒ…å£“å¾—æˆ‘å–˜ä¸éæ°£ä¾†",
        "æˆ‘å¾ˆä¸é–‹å¿ƒä»¥è‡´å¤±çœ ",
        "æˆ‘æ„Ÿåˆ°é›£éå’Œæ‚²å‚·",
        "æˆ‘çš„ä¸å¿«æ¨‚å°è‡´æˆ‘å“­æ³£",
        "æˆ‘æœƒæœ‰å‚·å®³è‡ªå·±çš„æƒ³æ³•"
    ]; %>

    <% dourQuestions.forEach((question, index) => { %>
        <tr>
            <td><%= question %></td>
            <% assessmentsData.forEach(item => { %>
                <td><%= item[`dour_answer_${index + 1}`] %></td>
            <% }); %>
        </tr>
    <% }); %>

    <tr>
        <td>ç¸½åˆ†</td>
        <% assessmentsData.forEach(item => { %>
            <td class="<%= item.dour_score >= 20 ? 'highlight' : '' %>">
                <%= item.dour_score %>
            </td>
        <% }); %>
    </tr>
</tbody>

        </table>
    </div>

    <a href="/result?<%= queryStringParam %>=<%= recordId %>" class="btn btn-secondary mt-3">è¿”å›å€‹äººè©³ç´°è³‡æ–™</a>
</div>
</body>
</html>
