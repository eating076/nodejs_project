<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¦ªå­ä¾é™„æ”¯æŒé‡è¡¨</title>
    <link rel="stylesheet" 
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body {
            background: linear-gradient(to right, rgba(0, 123, 255, 0.1), rgba(0, 123, 255, 0.2)),
                        url('https://via.placeholder.com/1500x1000/87CEFA/ffffff?text=Background+Image') no-repeat center center fixed;
            background-size: cover;
            font-family: 'DFKai-SB', 'æ¨™æ¥·é«”', DFKai-SB, serif;
            color: #333;
        }
        .container {
            margin-top: 50px;
            max-width: 95%;
            margin-left: auto;
            margin-right: auto;
        }
        .white-box {
            background-color: #fff;
            border-radius: 16px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 30px;
        }
        .table {
            background-color: #ffffff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .table th {
            background-color: #343a40;
            color: white;
        }
        .table td {
            vertical-align: middle;
        }
        h2 {
            font-size: 30px;
            color: #4e73df;
            margin-bottom: 20px;
            font-weight: 700;
        }
        p {
            font-size: 18px;
            color: #333;
        }
        .table tbody tr:hover {
            background-color: #f1f1f1;
        }

        @media (max-width: 768px) {
            .container {
                padding-left: 15px;
                padding-right: 15px;
            }
            h2 {
                font-size: 24px;
            }
            .table th, .table td {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="white-box">
        <h2 class="text-center mb-4">è¦ªå­ä¾é™„æ”¯æŒé‡è¡¨ç´€éŒ„</h2>

        <!-- é¡¯ç¤ºä½¿ç”¨è€…è³‡è¨Š -->
        <p><strong>IDï¼š</strong> <%= userId || 'æœªæä¾›' %></p>
        <p><strong>åå­—ï¼š</strong> <%= user_name || 'æœªæä¾›' %></p>


            <!-- Console ç¢ºèª userId -->
            <script>
                console.log("ğŸ” EJS å‰ç«¯æ”¶åˆ°çš„ userId:", "<%= userId %>");
            </script>

            <% if (attachmentData && attachmentData.length > 0) { %>
                <table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>æ¬„ä½åç¨±</th>
            <% attachmentData.forEach((_, index) => { %>
                <th>ç´€éŒ„ <%= index + 1 %></th>
            <% }); %>
        </tr>
    </thead>
<tbody>
    <tr>
        <td>æ¸¬é©— ID</td>
        <% attachmentData.forEach(data => { %>
            <td><%= data.attachment_id %></td>
        <% }); %>
    </tr>
    <tr>
        <td>æ¸¬é©—é‡è¡¨</td>
        <% attachmentData.forEach(data => { %>
            <td><%= data.attachment_question_content %></td>
        <% }); %>
    </tr>
    <tr>
        <td>æ¸¬é©—æ—¥æœŸ</td>
        <% attachmentData.forEach(data => { %>
            <td><%= data.formattedTestDate %></td>
        <% }); %>
    </tr>

    <% const attachmentQuestions = [
        "çœ‹åˆ°å­©å­ï¼Œæˆ‘å°±æœƒè¦ºå¾—å¿ƒæƒ…å¥½",
        "æˆ‘å–œæ­¡é™ªä¼´è‘—å­©å­",
        "å’Œå­©å­åœ¨ä¸€èµ·æ˜¯ä¸€ç¨®äº«å—",
        "æˆ‘å–œæ­¡æŠ±è‘—å­©å­çš„æ„Ÿè¦º",
        "å­©å­åŠ å…¥æˆ‘çš„ç”Ÿæ´»ï¼Œè®“æˆ‘æ„Ÿåˆ°å¹¸ç¦",
        "é™ªåœ¨å­©å­èº«é‚Šï¼Œè®“æˆ‘æ„Ÿåˆ°æ»¿è¶³",
        "æˆ‘å–œæ­¡æ¬£è³å­©å­çš„è¡¨æƒ…æˆ–å‹•ä½œ"
    ]; %>

    <% attachmentQuestions.forEach((question, index) => { %>
        <tr>
            <td><%= question %></td>
            <% attachmentData.forEach(data => { %>
                <td><%= data[`attachment_answer_${index + 1}`] %></td>
            <% }); %>
        </tr>
    <% }); %>

    <tr>
        <td>è¦ªè¿‘åˆ†æ•¸</td>
        <% attachmentData.forEach(data => { %>
            <td><%= data.attachment_score_a %></td>
        <% }); %>
    </tr>

    <% const attachmentQuestionsB = [
        "æˆ‘åœ¨ç…§é¡§å­©å­çš„æ™‚å€™ï¼Œæœƒæ„Ÿåˆ°ä¸è€ç…©",
        "æ™‚æ™‚è¦æ»¿è¶³å­©å­çš„éœ€æ±‚ï¼Œè®“æˆ‘æ„Ÿåˆ°æ²®å–ª",
        "å¦‚æœå­©å­å¹²æ“¾åˆ°æˆ‘çš„ä¼‘æ¯ï¼Œæˆ‘æœƒæ„Ÿåˆ°è¨å­",
        "æˆ‘è¦ºå¾—è‡ªå·±åƒæ˜¯å€‹ç…§é¡§å­©å­çš„æ©Ÿå™¨",
        "ç…§é¡§å­©å­è®“æˆ‘æ„Ÿåˆ°ç­‹ç–²åŠ›ç›¡",
        "æˆ‘æœƒå°å­©å­ç”Ÿæ°£"
    ]; %>

    <% attachmentQuestionsB.forEach((question, index) => { %>
        <tr>
            <td><%= question %></td>
            <% attachmentData.forEach(data => { %>
                <td><%= data[`attachment_answer_${index + 8}`] %></td>
            <% }); %>
        </tr>
    <% }); %>

    <tr>
        <td>è¦ªè·é©æ‡‰åˆ†æ•¸</td>
        <% attachmentData.forEach(data => { %>
            <td><%= data.attachment_score_b %></td>
        <% }); %>
    </tr>

    <% const attachmentQuestionsC = [
        "æˆ‘è¦ä¿ç•™è‡ªå·±çš„æœ€ä½³ç²¾åŠ›çµ¦å­©å­",
        "æˆ‘çœ‹é‡å­©å­çš„éœ€æ±‚ç”šéè‡ªå·±çš„",
        "å¦‚æœå­©å­å—è‹¦ï¼Œæˆ‘é¡˜æ„æ›¿ä»–æ‰¿å—",
        "å³ä½¿æˆ‘æœ‰å…¶ä»–é‡è¦äº‹æƒ…ï¼Œæˆ‘é‚„æ˜¯ä»¥ç…§é¡§å­©å­çˆ²ç¬¬ä¸€",
        "æˆ‘é¡˜æ„å› çˆ²å­©å­è€Œæ¸›å°‘è‡ªå·±çš„è‡ªç”±",
        "å°æˆ‘è€Œè¨€ï¼Œå­©å­æ˜¯ä¸–ç•Œä¸Šæœ€é‡è¦çš„"
    ]; %>

    <% attachmentQuestionsC.forEach((question, index) => { %>
        <tr>
            <td><%= question %></td>
            <% attachmentData.forEach(data => { %>
                <td><%= data[`attachment_answer_${index + 14}`] %></td>
            <% }); %>
        </tr>
    <% }); %>

    <tr>
        <td>æ‰¿è«¾åˆ†æ•¸</td>
        <% attachmentData.forEach(data => { %>
            <td><%= data.attachment_score_c %></td>
        <% }); %>
    </tr>

    <% const attachmentQuestionsD = [
        "æˆ‘èƒ½å¯Ÿè¦ºå­©å­ã€Œæƒ³ç¡è¦ºã€çš„è¨Šè™Ÿ",
        "æˆ‘æœƒç”±å­©å­çš„è¡¨æƒ…æˆ–å‹•ä½œï¼Œä¾†çŒœæ¸¬ä»–çš„éœ€æ±‚",
        "æˆ‘çŸ¥é“å­©å­çš„éœ€æ±‚å’Œæƒ…ç·’",
        "æˆ‘èƒ½æœ‰æ•ˆåœ°å®‰æ’«å­©å­",
        "æˆ‘æœƒä¾ç…§å­©å­çš„åæ‡‰ï¼Œä¾†èª¿æ•´ç…§é¡§ä»–çš„æ–¹å¼",
        "æˆ‘å°ç…§é¡§å­©å­çš„æ–¹å¼æœ‰ä¿¡å¿ƒ"
    ]; %>

    <% attachmentQuestionsD.forEach((question, index) => { %>
        <tr>
            <td><%= question %></td>
            <% attachmentData.forEach(data => { %>
                <td><%= data[`attachment_answer_${index + 20}`] %></td>
            <% }); %>
        </tr>
    <% }); %>

    <tr>
        <td>å›æ‡‰ä¿¡å¿ƒåˆ†æ•¸</td>
        <% attachmentData.forEach(data => { %>
            <td><%= data.attachment_score_d %></td>
        <% }); %>
    </tr>
</tbody>


</table>

            <% } else { %>
                <p class="text-center">ç›®å‰æ²’æœ‰æ¸¬é©—çµæœã€‚</p>
            <% } %>

            <a href="/result?user_id=<%= userId %>" class="btn btn-secondary mt-3">è¿”å›å€‹äººè©³ç´°è³‡æ–™</a>
        </div>
    </div>
</body>
</html>
