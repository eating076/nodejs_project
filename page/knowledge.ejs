<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>知識測驗記錄</title>
    <link rel="stylesheet" 
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body {
            background: linear-gradient(to right, rgba(0, 123, 255, 0.1), rgba(0, 123, 255, 0.2)), 
                        url('https://via.placeholder.com/1500x1000/87CEFA/ffffff?text=Background+Image') no-repeat center center fixed;
            background-size: cover;
            font-family: 'DFKai-SB', '標楷體', DFKai-SB, serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        .container {
            margin-top: 50px;
            background-color: #ffffff;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 950px;
            margin-left: auto;
            margin-right: auto;
        }
        h2 {
            text-align: center;
            color: #007bff;
        }
        .table {
            background-color: #ffffff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .highlight {
            font-weight: bold;
            color: #d9534f;
        }
        .table-responsive-wrapper {
            overflow-x: auto;
        }
    </style>
</head>
<body>

<div class="container">
    <h2 class="text-center mb-4">母乳知識量表記錄</h2>

    <% let queryStringParam = table === "users" ? "user_id" : "man_user_id"; %>
    <% let recordId = userId || manUserId; %>

    <p><strong>使用者 ID：</strong> <%= recordId || '未提供' %></p>
    <p><strong>名字：</strong> <%= user_name || '未提供' %></p>

    <div class="table-responsive-wrapper">
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>欄位名稱</th>
                    <% assessmentsData.forEach((_, index) => { %>
                        <th>紀錄 <%= index + 1 %></th>
                    <% }); %>
                </tr>
            </thead>
           <tbody>
    <tr>
        <td>量表 ID</td>
        <% assessmentsData.forEach(item => { %>
            <td><%= item.knowledge_id %></td>
        <% }); %>
    </tr>
    <tr>
        <td>測驗量表</td>
        <% assessmentsData.forEach(item => { %>
            <td><%= item.knowledge_question_content %></td>
        <% }); %>
    </tr>
    <tr>
        <td>測驗日期</td>
        <% assessmentsData.forEach(item => { %>
            <td>
                <%= new Date(item.knowledge_test_date).toLocaleDateString('zh-TW', {
                    year: 'numeric', month: 'long', day: 'numeric'
                }) %>
            </td>
        <% }); %>
    </tr>

    <% const knowledgeQuestions = [
        "產後所分泌的初乳，無論量多量少都能增加嬰兒的免疫力",
        "母親乳房的大小會影響乳汁分泌的多寡",
        "母親過度疲倦、緊張、心情不好會使乳汁分泌減少",
        "母親的水分攝取不足會使乳汁減少，只要飲用大量的水就能使乳汁分泌持續增加",
        "產後初期母親應該訂定餵奶時間表，幫助嬰兒於固定的時間吸奶",
        "為促進乳汁的分泌，每次餵奶前都要做乳房的熱敷與按摩",
        "哺餵母乳時當嬰兒只含住乳頭，母親需重新調整姿勢，盡量讓嬰兒含住全部或部分乳暈",
        "為了幫助嬰兒成功含乳，母親可以手掌支托乳房，支托乳房的手指應遠離乳暈",
        "餵奶前後，母親不須用肥皂以及清水清洗乳頭",
        "即使母親的乳頭是平的或凹陷的，嬰兒還是可以吃到足夠的母乳",
        "產後初期當母親乳汁還沒來之前，嬰兒還是可以吃到足夠的母乳",
        "當母親感到乳頭有受傷或輕微破皮時，可以在哺餵完母乳後擠一些乳汁塗抹乳頭",
        "哺餵母乳時嬰兒嗜睡或哭鬧是母親乳汁不夠的徵象",
        "為避免嬰兒呼吸不順暢，哺餵母乳時母親需要用手指壓住嬰兒鼻子附近的乳房部位",
        "乳汁的分泌量主要是受到嬰兒的吸吮次數與吸吮時間所影響，當嬰兒吸吮次數越多、吸吮時間越久，母親的乳汁分泌量也會越多",
        "當母親感覺脹奶時，多讓嬰兒吸吮乳房是最佳的處理方式",
        "嬰兒生病的時候，為了讓嬰兒獲得適當的休息，母親應該暫停哺餵母乳",
        "當嬰兒體力較差或吸吮力弱，母親可以在嬰兒吸吮時同時用支托乳房的手擠乳協助",
        "產後初期混合哺餵配方奶，母親的乳汁分泌量會受到影響",
        "產後初期混合哺餵配方奶，會讓嬰兒在學習直接吸吮母親乳房時，需要花長一點的時間適應",
        "當哺餵母乳時嬰兒嗜睡，母親可以試著鬆開包巾或輕搓嬰兒四肢或耳朵",
        "沒有到病嬰室(嬰兒隔離病房)親餵嬰兒時，母親也需要規律地擠出乳汁",
        "擠乳時母親的手放在乳暈的位置，往乳頭方向來回擠壓",
        "嬰兒已經吃過的那瓶奶水，應該於當餐吃完，沒有吃完的話就需要丟掉",
        "產後初期乳汁未大量分泌前，母親應進行親自哺餵或擠奶，一天至少每三小時一次，每次至少十五分鐘"
    ]; %>

    <% knowledgeQuestions.forEach((question, index) => { %>
        <tr>
            <td><%= question %></td>
            <% assessmentsData.forEach(item => { %>
                <td><%= item[`knowledge_answer_${index + 1}`] %></td>
            <% }); %>
        </tr>
    <% }); %>

    <tr>
        <td>總分</td>
        <% assessmentsData.forEach(item => { %>
            <td class="<%= item.knowledge_score >= 20 ? 'highlight' : '' %>">
                <%= item.knowledge_score %>
            </td>
        <% }); %>
    </tr>
</tbody>

        </table>
    </div>

    <a href="/result?<%= queryStringParam %>=<%= recordId %>" class="btn btn-secondary mt-3">返回個人詳細資料</a>
</div>


</body>
</html>
