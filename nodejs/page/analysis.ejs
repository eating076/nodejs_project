<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>分析結果</title>
    <link rel="stylesheet" href="analysis.css">
</head>
<body>
    <h1>分析結果</h1>

    <div class="input-section">
        <label for="testDate">測驗日期:</label>
        <input type="date" id="testDate" name="testDate" required>
        <br>
        <label for="testScore">測驗分數:</label>
        <input type="number" id="testScore" name="testScore" required>
        <br>
        <label for="analysisAdvice">分析結果及建議:</label>
        <span class="toggleContent">&#9656;</span>
        <div id="analysisContent" class="moreContent" style="display: none;">
            <textarea id="analysisAdvice" name="analysisAdvice" rows="4" cols="50"></textarea>
        </div>
        <br>
        <button type="button" id="displayResultsBtn">顯示結果</button>
    </div>

    <h2>結果:</h2>
    <div class="result-section">
        <p>測驗日期: <span id="displayTestDate"></span></p>
        <p>測驗分數: <span id="displayTestScore"></span></p>
        <p>分析結果及建議: <span id="displayAnalysisAdvice"></span></p>
    </div>

    <nav>
        <ul>
            <li><a href="/about">返回查詢結果</a></li>
            <li><a href="/steps">步數統計</a></li>
            <li><a href="/scores">測驗分數</a></li>
            <li><a href="/advanced-search">進階查詢</a></li>
        </ul>
    </nav>

    <script>
        document.querySelector('.toggleContent').addEventListener('click', function() {
            const content = document.getElementById('analysisContent');
            if (content.style.display === 'none') {
                content.style.display = 'block';
                this.innerHTML = '&#9662;';
            } else {
                content.style.display = 'none';
                this.innerHTML = '&#9656;';
            }
        });

        document.getElementById('displayResultsBtn').addEventListener('click', function() {
            const testDate = document.getElementById('testDate').value;
            const testScore = parseInt(document.getElementById('testScore').value);
            const analysisAdvice = document.getElementById('analysisAdvice').value;

            document.getElementById('displayTestDate').innerText = testDate;
            const testScoreElement = document.getElementById('displayTestScore');
            testScoreElement.innerText = testScore;
            if (testScore < 60) {
                testScoreElement.style.color = 'red';
            } else {
                testScoreElement.style.color = 'black';
            }
            document.getElementById('displayAnalysisAdvice').innerText = analysisAdvice;
        });
    </script>
</body>
</html>
