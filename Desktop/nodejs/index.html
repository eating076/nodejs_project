<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>問卷調查</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>問卷調查</h1>
    <form id="surveyForm">
        <label for="user_id">用戶:</label>
        <input type="text" id="user_id" name="user_id" required><br><br>

        <label for="answer1">生產次數:</label>
        <input type="number" id="answer1" name="answer1" required><br><br>

        <label for="answer2">是否發生過妊娠合併症:</label>
        <input type="text" id="answer2" name="answer2" required><br><br>

        <label for="answer3">新生兒誕生後是否願意哺餵母乳:</label>
        <input type="text" id="answer3" name="answer3" required><br><br>

        <label for="answer4">是否為首次哺乳:</label>
        <input type="text" id="answer4" name="answer4" required><br><br>

        <label for="answer5">前次哺乳乳頭的疼痛分數:</label>
        <input type="number" id="answer5" name="answer5" required><br><br>

        <label for="answer6">是否有乳頭破皮的情況發生:</label>
        <input type="text" id="answer6" name="answer6" required><br><br>

        <label for="answer7">目前預期純哺乳哺餵時長:</label>
        <input type="number" id="answer7" name="answer7" required><br><br>

        <label for="answer8">前胎哺乳持續時間:</label>
        <input type="number" id="answer8" name="answer8" required><br><br>

        <label for="answer9">停止親餵母乳的原因:</label>
        <input type="text" id="answer9" name="answer9" required><br><br>

        <label for="survey_date">問卷日期:</label>
        <input type="date" id="survey_date" name="survey_date" required><br><br>

        <button type="submit">提交問卷</button>
    </form>

    <script>
        document.getElementById('surveyForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const jsonData = {};
            formData.forEach((value, key) => {
                jsonData[key] = value;
            });

            fetch('/insert-data', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(jsonData)
            })
            .then(response => response.text())
            .then(data => {
                alert(data);
            })
            .catch(error => {
                console.error('Error:', error);
                alert('提交失敗');
            });
        });

        document.getElementById('survey_date').setAttribute('max', new Date().toISOString().split('T')[0]);
    </script>
</body>
</html>
