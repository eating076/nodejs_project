<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>測驗分數</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>測驗分數</h1>

    <form id="scoreForm">
        <label for="testDate">測驗日期:</label>
        <input type="date" id="testDate" name="testDate" required>
        <br>
        <label for="stressIndex">壓力指數:</label>
        <input type="number" id="stressIndex" name="stressIndex" required>
        <br>
        <label for="weightChange">體重變化:</label>
        <input type="number" id="weightChange" name="weightChange" step="0.01" required>
        <span id="weightChangeIndicator"></span>
        <br>
        <label for="depressionIndex">憂鬱指數:</label>
        <input type="number" id="depressionIndex" name="depressionIndex" required>
        <div id="depressionColorBlock" style="width: 50px; height: 50px; display: inline-block; text-align: center; line-height: 50px; color: white;"></div>
        <br>
        <label for="testScore">測驗分數:</label>
        <input type="number" id="testScore" name="testScore" required>
        <br>
        <button type="button" id="displayResultsBtn">顯示結果</button>
    </form>

    <h2>結果:</h2>
    <table id="resultsTable">
        <tr>
            <th>測驗日期</th>
            <td><span id="displayTestDate"></span></td>
        </tr>
        <tr>
            <th>壓力指數</th>
            <td><span id="displayStressIndex"></span></td>
        </tr>
        <tr>
            <th>體重變化</th>
            <td><span id="displayWeightChange"></span></td>
        </tr>
        <tr>
            <th>憂鬱指數</th>
            <td><span id="displayDepressionIndex"></span></td>
        </tr>
        <tr>
            <th>測驗分數</th>
            <td><span id="displayTestScore"></span></td>
        </tr>
    </table>

    <nav>
        <ul>
            <li><a href="/about">返回查詢結果</a></li>
            <li><a href="/steps">步數統計</a></li>
            <li><a href="/analysis">分析結果</a></li>
            <li><a href="/advanced-search">進階查詢</a></li>
        </ul>
    </nav>

    <script>
        document.getElementById('weightChange').addEventListener('input', function() {
            const weightChange = parseFloat(document.getElementById('weightChange').value);
            const indicator = document.getElementById('weightChangeIndicator');
            if (weightChange > 0) {
                indicator.innerHTML = `&#9650; ${weightChange}`;
                indicator.style.color = 'green';
            } else if (weightChange < 0) {
                indicator.innerHTML = `&#9660; ${weightChange}`;
                indicator.style.color = 'red';
            } else {
                indicator.innerHTML = `&#9650;&#9660; ${weightChange}`;
                indicator.style.color = 'black';
            }
        });

        document.getElementById('depressionIndex').addEventListener('input', function() {
            const depressionIndex = parseInt(document.getElementById('depressionIndex').value);
            const colorBlock = document.getElementById('depressionColorBlock');
            if (depressionIndex < 20) {
                colorBlock.style.backgroundColor = 'green';
            } else if (depressionIndex < 40) {
                colorBlock.style.backgroundColor = 'yellow';
            } else if (depressionIndex < 60) {
                colorBlock.style.backgroundColor = 'orange';
            } else {
                colorBlock.style.backgroundColor = 'red';
            }
            colorBlock.innerText = depressionIndex;
        });

        document.getElementById('displayResultsBtn').addEventListener('click', function() {
            const testDate = document.getElementById('testDate').value;
            const stressIndex = document.getElementById('stressIndex').value;
            const weightChange = document.getElementById('weightChange').value;
            const depressionIndex = document.getElementById('depressionIndex').value;
            const testScore = parseInt(document.getElementById('testScore').value);

            document.getElementById('displayTestDate').innerText = testDate;
            document.getElementById('displayStressIndex').innerText = stressIndex;
            document.getElementById('displayWeightChange').innerText = weightChange;
            document.getElementById('displayDepressionIndex').innerText = depressionIndex;
            const testScoreElement = document.getElementById('displayTestScore');
            testScoreElement.innerText = testScore;
            if (testScore < 60) {
                testScoreElement.style.color = 'red';
            } else {
                testScoreElement.style.color = 'black';
            }
        });
    </script>
</body>
</html>
